const e=/(^\d{8}(0\d|10|11|12)([0-2]\d|30|31)\d{3}$)|(^\d{6}(18|19|20)\d{2}(0\d|10|11|12)([0-2]\d|30|31)\d{3}(\d|X|x)$)/,t=t=>!!t&&e.test(t),n={getBirthday:e=>{if(!t(e))throw new Error("参数错误");const n=e.substring(6,14);return[n.substring(0,4),n.substring(4,6),n.substring(6)].join("-")},getYear:e=>{if(!t(e))throw new Error("参数错误");const r=n.getBirthday(e);return globalThis.parseInt(r.split("-")[0])},getMonth:e=>{if(!t(e))throw new Error("参数错误");const r=n.getBirthday(e);return globalThis.parseInt(r.split("-")[1])},getDate:e=>{if(!t(e))throw new Error("参数错误");const r=n.getBirthday(e);return globalThis.parseInt(r.split("-")[2])},getAge:e=>{if(!t(e))throw new Error("参数错误");const r=n.getYear(e),i=n.getMonth(e),o=n.getDate(e),l=new Date,s=l.getFullYear(),a=l.getMonth()+1,c=l.getDate();let d=s-r;return(a<i||a===i&&c<o)&&d--,d},getSexNum:e=>{if(!t(e))throw new Error("参数错误");const n=e.charAt(16);return globalThis.parseInt(n)%2==1?1:0},getSex:e=>1===n.getSexNum(e)?"男":"女",getInfo:e=>{if(!t(e))throw new Error("参数错误");e.substring(0,2),e.substring(2,4),e.substring(4,6),e.substring(14,16),e.charAt(17);const r={};return r.birthday=n.getBirthday(e),r.year=n.getYear(e),r.month=n.getMonth(e),r.date=n.getDate(e),r.age=n.getAge(e),r.sex=n.getSex(e),r.sexNum=n.getSexNum(e),r}},r=Object.prototype.toString,i=e=>"[object Object]"===r.call(e),o={deepCopy:e=>JSON.parse(JSON.stringify(e)),copyValue:(e,t)=>{if(!o.isObject(e)||!o.isObject(t))throw new Error("参数异常");Object.keys(e).forEach((n=>{Reflect.has(t,n)&&(e[n]=t[n])}))},isObject:i,isEmpty:e=>i(e)&&0===Object.keys(e).length,emptyStrToNull:e=>{if(!i(e))return e;const t=JSON.parse(JSON.stringify(e));if("object"==typeof t)for(let e of Object.keys(t))"string"==typeof t[e]&&""===t[e]&&(t[e]=null);return t}},l=["year","month","day","hour","minute","second"],s={format:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss",n=new Date(e);if("string"==typeof e&&e.length==="YYYY-MM-DD".length&&n.setHours(0,0,0,0),!(n instanceof Date))throw new Error("参数有误");if(t){let e=l.find((e=>e===t));if(e)switch(e){case"year":t="YYYY";break;case"month":t="YYYY-MM";break;case"day":t="yyyy-MM-dd";break;case"hour":t="YYYY-MM-DD HH";break;case"minute":t="YYYY-MM-DD HH:mm";break;default:t="YYYY-MM-DD HH:mm:ss"}}else t="YYYY-MM-DD HH:mm:ss";let r=n.getFullYear();r<1900&&(r+=1900);let i=n.getMonth()+1;i<10&&(i="0"+i);let o=n.getDate();o<10&&(o="0"+o);let s=n.getHours();s<10&&(s="0"+s);let a=n.getMinutes();a<10&&(a="0"+a);let c=n.getSeconds();c<10&&(c="0"+c);const d=r+"-"+i+"-"+o+" "+s+":"+a+":"+c,h=d.split(" "),g=h[0].split("-"),u=h[1].split(".")[0].split(":"),f=/yyyy|YYYY/,p=/MM/,m=/dd|DD/,x=/HH/,b=/mm/,w=/ss/;return t.replace(f,g[0]).replace(p,g[1]).replace(m,g[2]).replace(x,u[0]).replace(b,u[1]).replace(w,u[2])},cnWeek:e=>{if("string"==typeof e&&(e=new Date(e)),!(e instanceof Date))throw new Error("参数有误");const t=e.getDay();return new Map([[0,"日"],[1,"一"],[2,"二"],[3,"三"],[4,"四"],[5,"五"],[6,"六"]]).get(t)},realMonth:e=>{if("string"==typeof e&&(e=new Date(e)),!(e instanceof Date))throw new Error("参数有误");return e.getMonth()+1},withRealMonth:(e,t)=>{if(t<1||t>31)throw new Error("日期越界");if("string"==typeof e&&(e=new Date(e)),!(e instanceof Date))throw new Error("参数有误");let n=new Date(e);return n.setMonth(t-1),n}},a={uuid:()=>{const e="0123456789abcdef",t=e.length;return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/x/g,(n=>e.charAt(Math.floor(Math.random()*t))))},uuid32:()=>a.uuid().replace(/-/g,"")},c=(e,t)=>{if(!e)return!1;const n=e.lastIndexOf(".");if(n<0)return!1;const r=e.substring(n);return!!t.includes(r.toLowerCase())},d={isImg:e=>c(e,[".jpg",".jpeg",".png",".gif"]),isPdf:e=>c(e,[".pdf"])},h="id",g="parentId",u="children",f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u;const o=t.filter((t=>t[r]===e[n]));if(o.length&&(e[i]=o),0!==o.length)for(let e of o)f(e,t,n,r,i)},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{childrenField:r=u}=t;return e.forEach((e=>{n.push(e);const i=e[r];i&&i.length&&p(i,t,n)})),n},m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("id 参数错误");if(!t||!t.length)throw new Error("tree 参数错误");const{idFieldName:r="id",childrenFieldName:i="children"}=n;let o=null;for(let n of t)n[r]===e&&(o=n);if(o)return o;for(let r of t)if(r[i]&&r[i].length&&(o=m(e,r[i],n),o))return o;return o},x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const{idField:i=h,parentIdField:o=g,childrenField:l=u}=n,s=m(e[o],t,{idFieldName:i,childrenFieldName:l});return s&&(r.push(s),x(s,t,n,r)),r},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const{childrenField:r=u}=t;if(!e||!e[r])return n;const i=e[r];if(i&&i.length)for(let e of i)n.push(e),b(e,t,n);return n},w={toTree:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{idField:r=h,parentIdField:i=g,childrenField:o=u}=n;let l=e.filter((e=>e[i]===t));for(let t of l)f(t,e,r,i,o);return l},toList:p,findNode:m,ancestor:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{idField:r=h,childrenField:i=u}=n,o=m(e,t,{idFieldName:r,childrenFieldName:i});return o?x(o,t,n):[]},descendant:b},y=Object.prototype.toString,Y=e=>"[object Object]"===y.call(e),v={isArray:e=>"[object Array]"===y.call(e),isObject:Y,isString:e=>"[object String]"===y.call(e),isNumber:e=>"[object Number]"===y.call(e)&&e==e,isRegExp:e=>"[object RegExp]"===y.call(e),isFile:e=>"[object File]"===y.call(e),isBlob:e=>"[object Blob]"===y.call(e),isUndefined:e=>void 0===e,isNull:e=>null===e,isFunction:e=>"function"==typeof e,isEmptyObject:e=>Y(e)&&0===Object.keys(e).length,isExist:e=>!(!e&&0!==e)};function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class M{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;D(this,"sizes",[]),D(this,"total",0),D(this,"size",10),D(this,"current",1),D(this,"currentChange",(e=>{e()})),D(this,"sizeChange",(e=>{this.current=1,e()})),this.size=e}get page(){return this.current}set page(e){this.current=e}get rows(){return this.size}set rows(e){this.size=e}}const E={build:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return new M(e)},pageData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{current:r,size:i}=e,{withIndex:o=!1,indexField:l="index"}=n;if(!r||!i)return[];const s=(r-1)*i,a=s+i,c=t.slice(s,a);if(o){let e=[];for(let t=s+1;t<a+1;t++)e.push(t);c.forEach(((t,n)=>{t[l]=e[n]}))}return c},Page:M},j="1.23452384164.123412415",F=14,S="bottom-right",I=e=>{const t=document.getElementById(j);null!==t&&document.body.removeChild(t);const n=document.createElement("canvas");n.width=200,n.height=120;const r=n.getContext("2d");r.rotate(-20*Math.PI/180),r.translate(-30,20),r.font="16px Vedana",r.fillStyle="rgba(200, 200, 200, 0.20)",r.textAlign="left",r.textBaseline="middle";let i=0,o=n.height/2,l=0;for(let t=0;t<e.length;t++)i+=r.measureText(e[t]).width,i>200&&(r.fillText(e.substring(l,t),10,o),o+=18,i=0,l=t),t===e.length-1&&r.fillText(e.substring(l,t+1),10,o);const s=document.createElement("div");return s.id=j,s.style.pointerEvents="none",s.style.top="25px",s.style.left="25px",s.style.position="fixed",s.style.zIndex="100000",s.style.width=document.documentElement.clientWidth-50+"px",s.style.height=document.documentElement.clientHeight-50+"px",s.style.background="url("+n.toDataURL("image/png")+") center 50% repeat",document.body.appendChild(s),j},O=e=>new Promise(((t,n)=>{let r=new FileReader;r.addEventListener("load",(()=>{let e=new Image;e.src=r.result,e.addEventListener("load",(()=>t(e)))})),r.readAsDataURL(e)})),N=e=>{let t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{position:i=S}=r,o=e.getContext("2d"),l="bottom-left"===i?0:e.width-n;console.log("xOffset ",l);const s=e.height-t,a=o.getImageData(l,s,n,t),c=a.data;let d=0,h=0,g=0,u=0;for(let e=0;e<c.length;e+=4)0!==c[e+3]&&(d+=c[e],h+=c[e+1],g+=c[e+2],u++);const f=Math.round(d/u),p=Math.round(h/u),m=Math.round(g/u),x=Math.round(.299*f+.587*p+.114*m);let b;return b=x>192?"black":"white",b},U=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg",r=arguments.length>3?arguments[3]:void 0;const{baseSize:i=F,position:o=S,minSize:l=i}=r;return console.log("baseSize ",i),new Promise(((r,s)=>{let a=e.getContext("2d");const c=i;console.log("canvas.height ",e.height);let d=c*(e.height/1080);d<l&&(d=l),a.font=`${d}px 宋体`,a.textAlign="bottom-left"===o?"left":"right";const h=t.split("\n");h.reverse();const g=1.5*d;console.log("fontSize ",d);const u=d,f=u+(h.length-1)*g;let p=h[0];for(const e of h)e.length>p.length&&(p=e);const m=p.length*d;a.fillStyle=k(e,f,m,{position:o});const x="bottom-left"===o?d:e.width-d;for(let t=0;t<h.length;t++)a.fillText(h[t],x,e.height-u-t*g);e.toBlob((e=>r(e)),n)}))},C={imgWatermark:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await O(e),i=N(r),o=await U(i,t,e.type,n);return new File([o],e.name,{type:e.type})}},H={setWatermark:e=>{const t=document.getElementById(j);e&&!t&&(I(e),window.onresize=()=>{I(e)})},outWatermark:()=>{const e=document.getElementById(j);e&&document.body.removeChild(e)}},z={speakText:e=>{let t=window.speechSynthesis,n=new SpeechSynthesisUtterance;n.text=e,n.lang="zh-CN",n.volume=10,n.rate=1,n.pitch=1,t.speak(n)},playAudio:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Audio;return t.pause(),t.src=e,t.play(),t},download:e=>{if(!e)return"";const t=e.lastIndexOf("/")+1,n=document.createElement("a");n.download=e.substring(t),n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},A={IDCardUtils:n,DateUtils:s,ObjectUtils:o,UUIDUtils:a,FileUtils:d,TreeUtils:w,IsUtils:v,PageUtils:E,DomUtils:H,WebUtils:z,WatermarkUtils:C};export{s as DateUtils,H as DomUtils,d as FileUtils,n as IDCardUtils,v as IsUtils,o as ObjectUtils,E as PageUtils,w as TreeUtils,a as UUIDUtils,C as WatermarkUtils,z as WebUtils,A as default};
